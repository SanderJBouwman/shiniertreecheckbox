(()=>{"use strict";var e={187:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(81),o=n.n(a),r=n(645),l=n.n(r)()(o());l.push([e.id,".SHzVaS4RJc4tmJyLMI8W{}\n.cRw9fi1UDFPCMJgG6URX{}\n.IStNN1p0CN0hSLYECq1B{}\n.VfBMZdm8ju4Tnf6Wmu_f{}\n\n.AvNzudfTj7319d1JWVNO {\n    background-color: white;\n    /*border-radius: 5px;*/\n    /*border: black 1px solid;*/\n}\n\n.j5vn4vVXEF8dWptTBrNZ {\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.ykGm5XhAO3TcwJC7r4gs {\n    padding: 0;\n    margin: 0;\n    width: 100%;\n}\n\n.kFKc_IEorQbMeNKZztC9 {\n    margin-bottom: 0;\n}\n\n.AtDEUXEgsNyd9awsIPgE {\n    min-width: 16px;\n    padding-right: 8px;\n    cursor: pointer;\n    fill: var(--bs-black);\n}\n\n.pYxn6nnwHPQFE9JSQiTO {\n    padding-right: 16px;\n}\n\n.AtDEUXEgsNyd9awsIPgE.cRw9fi1UDFPCMJgG6URX > svg {\n    transform: rotate(45deg);\n\n}\n.AtDEUXEgsNyd9awsIPgE.cRw9fi1UDFPCMJgG6URX > svg {\n    transform-origin: center;\n    transition: transform 0.3s ease; /* You can adjust the duration and timing function */\n}\n\n.AtDEUXEgsNyd9awsIPgE.SHzVaS4RJc4tmJyLMI8W > svg {\n    transform: rotate(0deg);\n}\n\n.AtDEUXEgsNyd9awsIPgE.SHzVaS4RJc4tmJyLMI8W > svg {\n    transform-origin: center;\n    transition: transform 0.3s ease; /* You can adjust the duration and timing function */\n}\n\n\n.AtDEUXEgsNyd9awsIPgE:hover{\n    fill: #e37225;\n}\n\n.ojbCeDoAsNt5jhq5dCFC.IStNN1p0CN0hSLYECq1B{\n    color: var(--bs-black);\n    /* Make the label bold and underlined */\n    font-weight: bold;\n}\n\n.AYLtW5ltLRqzw3wEIjQA {\n    min-width: 16px;\n    min-height: 16px;\n    margin-right: 5px;\n}\n\n.XoZSZf_0kkv0Su8BnSUO {\n    min-width: 16px;\n    min-height: 16px;\n    margin-right: 5px;\n}\n.eubpWHQZqVjHwvfcZtUg{\n    padding: 0;\n    margin: 0;\n}\n.eubpWHQZqVjHwvfcZtUg.VfBMZdm8ju4Tnf6Wmu_f{\n    cursor: pointer;\n}\n\n.ojbCeDoAsNt5jhq5dCFC.VfBMZdm8ju4Tnf6Wmu_f:hover{\n    /* Make the label bold and underlined */\n    font-weight: bold;\n    text-decoration: underline;\n}\n\n.c759lhSAaT3OBU6HSE7q{\n}\n\n.m5YkTHS__Zj_UE0GsBGt{\n    white-space: nowrap;\n}\n\n.lslMhbbaLLjGy9N2I7n7{\n\n}\n",""]),l.locals={collapsed:"SHzVaS4RJc4tmJyLMI8W",expanded:"cRw9fi1UDFPCMJgG6URX",highlight:"IStNN1p0CN0hSLYECq1B",clickable:"VfBMZdm8ju4Tnf6Wmu_f",treeCheckboxContainer:"AvNzudfTj7319d1JWVNO",treeCheckboxNodeContainer:"j5vn4vVXEF8dWptTBrNZ",treeCheckboxButtonContainer:"ykGm5XhAO3TcwJC7r4gs",treeCheckboxNodeChildren:"kFKc_IEorQbMeNKZztC9",treeCheckboxCaret:"AtDEUXEgsNyd9awsIPgE",treeCheckboxCaretEmpty:"pYxn6nnwHPQFE9JSQiTO",treeCheckboxNodeLabel:"ojbCeDoAsNt5jhq5dCFC",treeCheckboxNodeCheckboxInclude:"AYLtW5ltLRqzw3wEIjQA",treeCheckboxNodeCheckbox:"XoZSZf_0kkv0Su8BnSUO",treeCheckboxSearchBarContainer:"eubpWHQZqVjHwvfcZtUg",treeCheckboxSearchResultsContainer:"c759lhSAaT3OBU6HSE7q",treeCheckboxNodeChild:"m5YkTHS__Zj_UE0GsBGt",treeCheckboxNode:"lslMhbbaLLjGy9N2I7n7"};const s=l},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(a)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(l[i]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&l[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var r={},l=[],s=0;s<e.length;s++){var i=e[s],c=a.base?i[0]+a.base:i[0],d=r[c]||0,h="".concat(c," ").concat(d);r[c]=d+1;var u=n(h),b={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==u)t[u].references++,t[u].updater(b);else{var f=o(b,a);a.byIndex=s,t.splice(s,0,{identifier:h,updater:f,references:1})}l.push(h)}return l}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=a(e=e||[],o=o||{});return function(e){e=e||[];for(var l=0;l<r.length;l++){var s=n(r[l]);t[s].references--}for(var i=a(e,o),c=0;c<r.length;c++){var d=n(r[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}r=i}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{HTMLWidgets;var e=n(379),t=n.n(e),a=n(795),o=n.n(a),r=n(569),l=n.n(r),s=n(565),i=n.n(s),c=n(216),d=n.n(c),h=n(589),u=n.n(h),b=n(187),f={};f.styleTagTransform=u(),f.setAttributes=i(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=d(),t()(b.Z,f);const p=b.Z&&b.Z.locals?b.Z.locals:void 0;function g(e,t,n){(function(e,t,n){let a=e[t].parent;for(;null!==a;)n.unshift(a),a=e[a].parent;return n})(e,t.value,[]).forEach((function(e){n.find("#checkbox-node-"+e).find(`.${p.treeCheckboxCaret}.${p.collapsed}`).first().click()})),n.find(`.${p.treeCheckboxNodeLabel}`).removeClass(p.highlight);let a=n.find("#checkbox-node-"+t.value);a.find(`.${p.treeCheckboxNodeLabel}`).first().addClass(p.highlight),n.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),n.find(`.${p.treeCheckboxNodeContainer}`).show(),n.find(".tree-checkbox-search-bar").val(""),n.find(`.${p.treeCheckboxNodeContainer}`).animate({scrollTop:a.offset().top-n.find(`.${p.treeCheckboxNodeContainer}`).offset().top+n.find(`.${p.treeCheckboxNodeContainer}`).scrollTop()},500),n.find(`.${p.treeCheckboxNodeContainer}`).animate({scrollLeft:a.offset().left-n.find(`.${p.treeCheckboxNodeContainer}`).offset().left+n.find(`.${p.treeCheckboxNodeContainer}`).scrollLeft()},500)}function C(e,t){let n=e.toLowerCase(),a=t.toLowerCase();return n.replace(new RegExp(a,"g"),"<span class='text-fw fw-bold text-decoration-underline'>"+t+"</span>")}const w={};w.createUniqueID=(()=>{let e=0;return()=>e++})(),w.createTreeCheckboxContainer=function(e){let t=$("<div>",{class:`${p.treeCheckboxContainer} border border-fg rounded`,id:`tree-checkbox-container-${w.createUniqueID()}`});return null!==e.maxWidth&&t.css("max-width",e.maxWidth),null!==e.height&&t.css("height",e.height),t.css("list-style-type","none"),t},w.createElementNode=function(e,t,n,a,o=null){let r=$("<div>",{class:`${p.treeCheckboxNode} ${p.collapsed}`,id:"checkbox-node-"+t}),l=$("<span>",{class:"tree-checkbox-node-span"}),s=$("<ul>",{class:p.treeCheckboxNodeChildren}).hide(),i=w.createCaret(a);l.append(i);const c=e.data("options");if(i.on("click",(function(){v.caretClickLogic.call(this,r,e,t,c,o)})),!c.hideCheckboxes){let n=w.attachCheckbox(e,r,t,c,o);l.append(n)}let d=$("<span>",{class:p.treeCheckboxNodeLabel});return d.html(n),c.clickableLabels&&(d.addClass(p.clickable),d.on("click",(function(){v.labelClickLogic(e,t,c)}))),l.append(d),r.append(l),a&&r.append(s),r},w.attachCheckbox=function(e,t,n,a,o=null){let r=$("<span>",{class:p.treeCheckboxNodeCheckbox,value:n});return $(document).ready((function(){v.setCheckboxLogic(e,r,n,a,o)})),r},w.createCaret=function(e,t=!1){if(e){let e=$("<span>",{class:p.treeCheckboxCaret});return t?(e.addClass(p.expanded),e.html('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/></svg>')):(e.addClass(p.collapsed),e.html('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"/></svg>')),e}return $("<span>",{class:p.treeCheckboxCaretEmpty})},w.generateDeSelectAllButton=function(e,t,n){let a="tree-checkbox-deselect-all-button-"+w.createUniqueID(),o=$("<button>",{class:"btn btn-outline-fg dropdown-toggle border-bottom",type:"button",id:a,"data-bs-toggle":"dropdown","aria-expanded":"false"});o.html("(De)select"),o.css("border-radius","0"),t.append(o);let r=$("<ul>",{class:"dropdown-menu","aria-labelledby":a});r.css("border-radius","0"),t.append(r);let l=$("<li>"),s=$("<button>",{class:"dropdown-item",type:"button",id:"tree-checkbox-deselect-all-button"});s.html("Deselect All"),l.append(s),r.append(l);for(let t in n.states)if("none"!==t&&"indeterminate"!==t){const a=t.toLowerCase(),o=$("<button>",{class:"dropdown-item",type:"button",id:"tree-checkbox-select-all-button"});o.html(`Select All (${a})`),r.append($("<li>").append(o)),o.on("click",(function(){v.deSelectAll(e,n,t),v.runUpdateCallback(e,"SelectAllChange",null,a)}))}s.on("click",(function(){v.deSelectAll(e,n,"none"),v.runUpdateCallback(e,"deSelectAll",null,"none")}))},w.generateCollapseButton=function(e,t){let n="tree-checkbox-collapse-expand-button-"+w.createUniqueID(),a=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:n});a.html("Collapse All"),a.css("border-radius","0"),t.append(a),a.on("click",(function(){v.collapseAll(e)}))},w.generateSearchBar=function(e,t,n,a){let o=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:"tree-checkbox-search-button"});o.html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">\n  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n</svg>Search'),o.css("border-radius","0"),e.append(o);let r=$("<div>",{class:`input-group ${p.treeCheckboxSearchBarContainer}`}).hide();t.append(r);let l=$("<input>",{class:"form-control tree-checkbox-search-bar",type:"text"});l.attr("placeholder","Search"),l.css("border-radius","0"),r.append(l),l.on("keyup",(function(e){!function(e,t){!function(e,t){let n=e.find(".tree-checkbox-search-bar").val().length;(t.minSearchChars>n||0===n)&&(e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),e.find(`.${p.treeCheckboxNodeContainer}`).show())}(e,t),t.advancedSearch?function(e,t){let n=e.find(".tree-checkbox-search-bar").val().toLowerCase();if(0===n.length)return e.find(`.${p.treeCheckboxNodeContainer}`).show(),void e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide();let a=function(e,t){let n=e.data("treeData"),a=[];return Object.keys(n).forEach((function(e){const o=["name","description","type"];if(n[e].label.toLowerCase().includes(t.toLowerCase())){let t=[];for(let e=0;e<Math.floor(3*Math.random())+1;e++){let e=o.splice(Math.floor(Math.random()*o.length),1)[0];t.push(e)}a.push({value:e,column:t})}})),a}(e,n);a=a.slice(0,t.maxSearchResults),function(e,t,n){e.find(`.${p.treeCheckboxNodeContainer}`).hide(),e.find(`.${p.treeCheckboxSearchResultsContainer}`).show(),e.data("options");const a=e.data("treeData");let o=$("<table>",{class:"table table-hover table-sm"}),r=$("<thead>"),l=$("<tbody>"),s=$("<tr>"),i=$("<th>",{scope:"col"}).html("Name"),c=$("<th>",{scope:"col"}).html("Search term found in");s.append(i),s.append(c),r.append(s),o.append(r),t.forEach((function(t){let r=$("<tr>"),s=$("<td>"),i=$("<td>"),c=a[t.value].label,d=t.column.sort().join(", ");d.includes("name")&&(c=C(c,n)),s.html(c),i.html(d),r.append(s),r.append(i),l.append(r),o.append(l),r.on("click",(function(){g(a,t,e)}))})),e.find(`.${p.treeCheckboxSearchResultsContainer}`).html(o)}(e,a,n)}(e,t):function(e,t){let n=e.find(".tree-checkbox-search-bar").val().toLowerCase();if(0===n.length)return e.find(`.${p.treeCheckboxNodeContainer}`).show(),void e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide();let a=e.data("treeData"),o=Object.values(a).filter((e=>e.label.toLowerCase().includes(n)));o=o.slice(0,t.maxSearchResults),function(e,t,n){e.find(`.${p.treeCheckboxNodeContainer}`).hide(),e.find(`.${p.treeCheckboxSearchResultsContainer}`).show();const a=e.data("options"),o=e.data("treeData");let r=$("<div> ",{class:"list-group"});if(t.forEach((function(t){let l=$("<a>",{class:"list-group-item list-group-item-action",value:t.value}),s=o[t.parent]?o[t.parent].label:"null",i=C(t.label,n);if(a.advancedSearch)i=i+" <small>("+t.column+")</small>",l.html(i);else{let e=$("<span>"),n=$("<span>").html(i);if(e.append(n),l.html(e),null!==t.parent){let t=$("<span>",{class:"badge bg-secondary rounded-pill float-right"}).html(s);e.append(t)}}r.append(l),l.on("click",(function(){g(o,t,e)}))})),0===t.length&&n.length>0){let e=$("<a>",{class:"list-group-item list-group-item-action"});e.html("No results found for <strong>"+n+"</strong>"),r.append(e)}e.find(`.${p.treeCheckboxSearchResultsContainer}`).html(r)}(e,o,n)}(e,t)}(a,n)})),l.on("keydown",(function(e){"Escape"===e.key&&v.searchBarCloseLogic(a,n)}));let s=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:"tree-checkbox-cancel-button","aria-label":"Close-search-bar"});s.html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>\n</svg>'),s.css("border-radius","0"),r.append(s),s.on("click",(function(){v.searchBarCloseLogic(a,n)})),o.on("click",(function(){v.searchBarClickLogic(a,n)}))},w.createTreeButtonContainer=function(e,t){let n=$("<div>",{class:`${p.treeCheckboxButtonContainer} container-fluid w-100`}),a=$("<div>",{class:"btn-group w-100"});if(n.append(a),t.showSelectAll&&w.generateDeSelectAllButton(e,a,t),t.showCollapseAll&&w.generateCollapseButton(e,a),t.showSearchBar){w.generateSearchBar(a,n,t,e);let o=$("<div>",{class:`${p.treeCheckboxSearchResultsContainer} overflow-auto`}).hide();o.css("height",t.height),o.css("max-height",t.height),n.append(o)}return n};const x=w,k={};console.log("Styles"),console.log(p),k.createTree=function(e,t,n){let a=x.createTreeCheckboxContainer(n);e.append(a);let o=x.createTreeButtonContainer(a,n);a.append(o),0===o.find(".btn-group").children().length&&o.hide();let r=this.flattenJSON(t);a.data("treeData",r),a.data("options",n);let l=$("<div>",{class:`${p.treeCheckboxNodeContainer} overflow-auto w-100`});l.css("height",n.height),l.css("max-height",n.height),a.append(l),this.addElementNodes(a,l,n)},k.flattenJSON=function(e){let t;return t={},function e(n,a=null,o=!1){n&&Array.isArray(n)&&n.forEach((n=>{if(t[n.value])throw new Error(`Duplicate value/ID '${n.value}'`);n.parent&&(a=n.parent);const r={...n,parent:a,isRendered:o};t[n.value]=r,n.children&&(r.children=n.children.map((e=>e.value))),e(n.children,n.value)}))}(e),t},k.addNode=function(e,t,n,a,o){if(!Object.keys(e).includes(t))throw new Error("Invalid parentID");if("string"!=typeof n)throw new Error("value must be a string");if("string"!=typeof a)throw new Error("label must be a string");if("object"!=typeof o&&null!==o)throw new Error("children must be an array or null")},k.addElementNodes=function(e,t){let n=e.data("treeData");e.data("options"),Array.from(Object.values(n)).filter((e=>null===e.parent&&!e.isRendered)).forEach((function(a){let o=x.createElementNode(e,a.value,a.label,a.children.length>0);t.append(o),n[a.value].isRendered=!0}))},k.setCheckBoxState=function(e,t){return e.html($("<span>",{class:t.textColour,html:t.symbol})),e.css("cursor","pointer"),t},k.setChildState=function(e,t,n){e.data("treeData")[t].children.map((t=>e.data("treeData")[t])).forEach((function(t){let a=e.find("#checkbox-node-"+t.value);a.data("state",n.data("state")),k.setCheckBoxState(a.find(`.${p.treeCheckboxNodeCheckbox}`),n.data("state"))}))},k.handleIntermediate=function(e,t,n,a){let o=e.data("treeData")[t].parent;if(null!==o){let t=e.data("treeData")[o].children.map((t=>e.data("treeData")[t]));if(!t.every((e=>e.isRendered)))throw new Error("Not all siblings have been rendered");let r=t.map((t=>e.find("#checkbox-node-"+t.value).data("state")));if(r.every((e=>e===r[0]))){let t=e.find("#checkbox-node-"+o);t.data("state",a.data("state")),k.setCheckBoxState(t.find(`.${p.treeCheckboxNodeCheckbox}`).first(),a.data("state"))}else{let t=e.find("#checkbox-node-"+o);t.data("state",n.states.indeterminate),k.setCheckBoxState(t.find(`.${p.treeCheckboxNodeCheckbox}`).first(),n.states.indeterminate)}}},k.setCheckboxLogic=function(e,t,n,a,o=null){let r=e.find("#checkbox-node-"+n);null===o?(r.data("state",a.states[a.defaultState]),k.setCheckBoxState(t,a.states[a.defaultState])):(r.data("state",a.states[o]),k.setCheckBoxState(t,a.states[o])),t.on("click",(function(){(function(e,t,n){let a=function(e,t){let n=Object.values(t).filter((e=>!e.skipCursor));e.skipCursor&&(n=n.filter((e=>!e.skipCursor)));let a=n.indexOf(e);return n[(a+1)%n.length]}(e.data("state"),n);e.data("state",a),k.setCheckBoxState(t,a)})(r,$(this),a.states),k.setChildState(e,n,r),k.handleIntermediate(e,n,a,r);let t=Object.keys(a.states).find((e=>a.states[e]===r.data("state")));k.runUpdateCallback(e,"CheckboxChange",n,t)}))},k.getNodeChildren=function(e,t){if(!data[t].isRendered)throw new Error("Node has not been rendered yet");let n=data[t].children,a=[];return n.forEach((function(t){if(!data[t].isRendered)throw new Error("Node has not been rendered yet");a.push(e.find("#checkbox-node-"+t))})),a},k.findNode=function(e,t,n=!0,a=!0){let o=e.data("treeData");if(!Object.keys(o).includes(t)&&n)throw new Error("Value does not exist");if(!o[t].isRendered&&a)throw new Error("Node has not been rendered yet");return e.find("#checkbox-node-"+t)},k.attachChildElement=function(e,t,n){let a=e.find("#checkbox-node-"+t);if(0===a.length)throw new Error("Parent node not found");let o=a.children(`.${p.treeCheckboxNodeChildren}`),r=$("<li>",{class:p.treeCheckboxNodeChild,style:"list-style-type: none;"});r.append(n),o.append(r)},k.updateChildrenElements=function(e,t,n,a){let o=e.data("treeData")[t].children.map((t=>e.data("treeData")[t]));const r=e.data("options");o.filter((e=>!e.isRendered)).forEach((function(o){let l=n.data("state"),s=Object.keys(r.states).find((e=>r.states[e]===l));"indeterminate"===s&&(s="none");let i=x.createElementNode(e,o.value,o.label,o.children.length>0,s);k.attachChildElement(e,t,i,a),e.data("treeData")[o.value].isRendered=!0}))},k.caretClickLogic=function(e,t,n,a,o){let r=$(this);r.toggleClass(p.collapsed),r.toggleClass(p.expanded),e.toggleClass(p.collapsed),e.toggleClass(p.expanded),e.hasClass(p.expanded)?(k.updateChildrenElements(t,n,e,o),r.parent().siblings(`.${p.treeCheckboxNodeChildren}`).slideDown()):e.hasClass(p.collapsed)&&r.parent().siblings(`.${p.treeCheckboxNodeChildren}`).slideUp()},k.searchBarClickLogic=function(e,t){e.find(".btn-group").hide();let n=e.find(`.${p.treeCheckboxSearchBarContainer}`);n.show(),n.find(".tree-checkbox-search-bar").focus()},k.deSelectAll=function(e,t,n){e.find(`.${p.treeCheckboxNode}`).each((function(){let e=$(this);e.data("state",t.states[n]),k.setCheckBoxState(e.find(`.${p.treeCheckboxNodeCheckbox}`),t.states[n])}))},k.runUpdateCallback=function(e,t,n=null,a=null){const o=e.data("options");if(null!==o.updateCallback){let e=o.updateCallbackArgs;null===e&&(e=[]),o.updateCallback({value:n,state:a,event:t},...e)}},k.collapseAll=function(e){e.find(`.${p.treeCheckboxNode}.${p.expanded}`).each((function(){let e=$(this),t=e.find(`.${p.treeCheckboxCaret}`).first();t.toggleClass(p.collapsed),t.toggleClass(p.expanded),e.toggleClass(p.collapsed),e.toggleClass(p.expanded),t.parent().siblings(`.${p.treeCheckboxNodeChildren}`).hide()}))},k.searchBarCloseLogic=function(e,t){e.find(`.${p.treeCheckboxSearchBarContainer}`).hide(),e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),e.find(`.${p.treeCheckboxNodeContainer}`).show(),e.find(".btn-group").show()},k.labelClickLogic=function(e,t,n){const a=n.clickableLabelsCallback;null===n.clickableLabelsCallbackArgs?a(t):a(t,...n.clickableLabelsCallbackArgs)},k.validateOptions=function(e){if(!e.startCollapsed)throw new Error("startCollapsed must be a boolean");if("string"!=typeof e.height)throw new Error("height must be a string");if(isNaN(e.height.slice(-1))||"0"!==e.height&&(e.height+="px",console.warn("height must be a valid CSS value. Appending px")),isNaN(e.height.slice(-1))||"0"!==e.height&&(e.height+="px",console.warn("height must be a valid CSS value. Appending px")),"boolean"!=typeof e.showSelectAll)throw new Error("showSelectAll must be a boolean");if("boolean"!=typeof e.showCollapseAll)throw new Error("showCollapseAll must be a boolean");if("boolean"!=typeof e.showSearchBar)throw new Error("showSearchBar must be a boolean");if("boolean"!=typeof e.advancedSearch)throw new Error("advancedSearch must be a boolean");if("boolean"!=typeof e.clickableLabels)throw new Error("clickableLabels must be a boolean");if(!0===e.clickableLabels&&null===e.clickableLabelsCallback)throw new Error("clickableLabelsCallback must be a function, when clickableLabels is true");if(null!==e.clickableLabelsCallback&&"function"!=typeof e.clickableLabelsCallback)throw new Error("clickableLabelsCallback must be a function");if(null!==e.clickableLabelsCallbackArgs&&!Array.isArray(e.clickableLabelsCallbackArgs))throw new Error("clickableLabelsCallbackArgs must be an array or null")};const v=k;let m={defaultStates:{},options:{},createState:function(e,t,n,a=!1){return{textColour:"text-secondary",spanClasses:"bg-secondary text-white",symbol:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>',textColour:e,spanClasses:t,symbol:n,skipCursor:a}}};m.defaultStates={checkbox:{none:m.createState("text-dark","bg-dark text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'),include:m.createState("text-success","bg-success text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'),indeterminate:m.createState("text-warning","bg-warning text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>\n</svg>',!0)},include:{none:m.createState("text-dark","bg-dark text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'),include:m.createState("text-success","bg-success text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'),indeterminate:m.createState("text-warning","bg-warning text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>\n</svg>',!0),exclude:m.createState("text-danger","bg-danger text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>')}},m.options={startCollapsed:!0,width:null,height:"450px",maxWidth:"100%",maxHeight:"100%",showSelectAll:!0,showCollapseAll:!0,showSearchBar:!0,advancedSearch:!1,clickableLabels:!1,clickableLabelsCallback:null,clickableLabelsCallbackArgs:null,returnNonLeafNodes:!1,minSearchChars:1,maxSearchResults:100,hideCheckboxes:!1,updateCallback:null,updateCallbackArgs:null,states:m.defaultStates.include,defaultState:"none"},m.createTreeCheckbox=function(e,t,n=this.options){if(console.log("Options:"),console.log(n),"object"!=typeof n)throw new Error("options must be an object");if(n={...this.options,...n,containerID:e},v.validateOptions(n),"string"!=typeof e)throw new Error("containerID must be a string");e.startsWith("#")||(e="#"+e);let a=$(e);if(0===a.length)throw new Error("Container does not exist");if("object"!=typeof t)throw new Error("data must be an object");if("string"==typeof n.states){let e=Object.keys(m.defaultStates);if(!e.includes(n.states))throw new Error(`The state ${n.states} is not available. The available states are: ${e}`);n.states=m.defaultStates[n.states]}if(!Object.keys(n.states).includes("indeterminate")||!Object.keys(n.states).includes("none"))throw new Error("options.states must have an indeterminate state");v.createTree(a,t,n),a.data("getValues",(function(){return m.values(e)}))},m.addNodes=function(e,t){if("string"!=typeof e)throw new Error("containerID must be a string");let n=$(e);if(0===n.length)throw new Error("Container does not exist, first create the tree with TreeCheckbox.createTreeCheckbox()");if("object"!=typeof t)throw new Error("data must be an object");if(!Array.isArray(t))throw new Error("data must be an array");if(0===t.length)throw new Error("data must have at least one element");if(!("label"in t[0]&&"value"in t[0]&&"parent"in t[0]&&"children"in t[0]))throw new Error("data must be in the format: [{'label':str, 'value':int, 'parent':int, 'children':[...]}]");let a=v.flattenJSON(t),o=n.find(`.${p.treeCheckboxContainer}`),r=o.data("treeData");const l=o.data("options");Object.keys(a).forEach((function(e){let t=a[e];if(t.value in r)throw new Error(`The value ${t.value} is already in the tree`)})),r={...r,...a},o.data("treeData",r),Object.keys(a).forEach((function(e){let t=a[e];if(null!==t.parent){let e=o.data("treeData")[t.parent];if(e.children.push(t.value),e.isRendered){let t=e.value,n=o.find("#checkbox-node-"+t),a=n.data("state"),r=Object.keys(l.states).find((e=>l.states[e]===a));"indeterminate"===r&&(r="none"),$(document).ready((function(){v.updateChildrenElements(o,t,n,r)}))}}}))},m.values=function(e){if("string"!=typeof e)throw new Error("containerID must be a string");const t=$(e);if(0===t.length)throw new Error("Container does not exist, first create the tree with TreeCheckbox.createTreeCheckbox()");const n=t.find(`.${p.treeCheckboxContainer}`),a=n.data("treeData"),o=n.data("options");if(o.hideCheckboxes)return[];const r=[];return Object.keys(a).forEach((function(e){const t=a[e];if(t.isRendered){const e=n.find("#checkbox-node-"+t.value).data("state"),l=Object.keys(o.states).find((t=>o.states[t]===e));(function(e,t){return"indeterminate"!==t&&"none"!==t&&(!!o.returnNonLeafNodes||0===e.children.length||e.children.every((e=>!a[e].isRendered)))})(t,l)&&r.push({value:t.value,state:l})}})),r},m.editOptions=function(e,t){let n={...$(e).find(`.${p.treeCheckboxContainer}`).data("options"),...t};v.validateOptions(n),$(e).find(`.${p.treeCheckboxContainer}`).data("options",n)},HTMLWidgets.widget({name:"shiniertreecheckbox",type:"output",factory:function(e,t,n){return{renderValue:function(t){console.log("Incoming data"),console.log(t),console.log("-----"),m.createTreeCheckbox(t.elementId,JSON.parse(t.data),t.options),e.style.width="100%",e.style.height="100%"},resize:function(e,t){}}}})})()})();