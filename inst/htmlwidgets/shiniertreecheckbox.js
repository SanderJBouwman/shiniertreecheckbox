(()=>{"use strict";var e={187:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(81),r=n.n(a),o=n(645),l=n.n(o)()(r());l.push([e.id,".SHzVaS4RJc4tmJyLMI8W{}\n.cRw9fi1UDFPCMJgG6URX{}\n.IStNN1p0CN0hSLYECq1B{}\n.VfBMZdm8ju4Tnf6Wmu_f{}\n\n.AvNzudfTj7319d1JWVNO {\n    background-color: white;\n    /*border-radius: 5px;*/\n    /*border: black 1px solid;*/\n}\n\n.j5vn4vVXEF8dWptTBrNZ {\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.ykGm5XhAO3TcwJC7r4gs {\n    padding: 0;\n    margin: 0;\n    width: 100%;\n}\n\n.kFKc_IEorQbMeNKZztC9 {\n    margin-bottom: 0;\n}\n\n.AtDEUXEgsNyd9awsIPgE {\n    min-width: 16px;\n    padding-right: 8px;\n    cursor: pointer;\n    fill: var(--bs-black);\n}\n\n.pYxn6nnwHPQFE9JSQiTO {\n    padding-right: 16px;\n}\n\n.AtDEUXEgsNyd9awsIPgE.cRw9fi1UDFPCMJgG6URX > svg {\n    transform: rotate(45deg);\n\n}\n.AtDEUXEgsNyd9awsIPgE.cRw9fi1UDFPCMJgG6URX > svg {\n    transform-origin: center;\n    transition: transform 0.3s ease; /* You can adjust the duration and timing function */\n}\n\n.AtDEUXEgsNyd9awsIPgE.SHzVaS4RJc4tmJyLMI8W > svg {\n    transform: rotate(0deg);\n}\n\n.AtDEUXEgsNyd9awsIPgE.SHzVaS4RJc4tmJyLMI8W > svg {\n    transform-origin: center;\n    transition: transform 0.3s ease; /* You can adjust the duration and timing function */\n}\n\n\n.AtDEUXEgsNyd9awsIPgE:hover{\n    fill: #e37225;\n}\n\n.ojbCeDoAsNt5jhq5dCFC.IStNN1p0CN0hSLYECq1B{\n    color: var(--bs-black);\n    /* Make the label bold and underlined */\n    font-weight: bold;\n}\n\n.AYLtW5ltLRqzw3wEIjQA {\n    min-width: 16px;\n    min-height: 16px;\n    margin-right: 5px;\n}\n\n.XoZSZf_0kkv0Su8BnSUO {\n    min-width: 16px;\n    min-height: 16px;\n    margin-right: 5px;\n}\n.eubpWHQZqVjHwvfcZtUg{\n    padding: 0;\n    margin: 0;\n}\n.eubpWHQZqVjHwvfcZtUg.VfBMZdm8ju4Tnf6Wmu_f{\n    cursor: pointer;\n}\n\n.ojbCeDoAsNt5jhq5dCFC.VfBMZdm8ju4Tnf6Wmu_f:hover{\n    /* Make the label bold and underlined */\n    font-weight: bold;\n    text-decoration: underline;\n}\n\n.c759lhSAaT3OBU6HSE7q{\n}\n\n.m5YkTHS__Zj_UE0GsBGt{\n    white-space: nowrap;\n}\n\n.lslMhbbaLLjGy9N2I7n7{\n\n}\n",""]),l.locals={collapsed:"SHzVaS4RJc4tmJyLMI8W",expanded:"cRw9fi1UDFPCMJgG6URX",highlight:"IStNN1p0CN0hSLYECq1B",clickable:"VfBMZdm8ju4Tnf6Wmu_f",treeCheckboxContainer:"AvNzudfTj7319d1JWVNO",treeCheckboxNodeContainer:"j5vn4vVXEF8dWptTBrNZ",treeCheckboxButtonContainer:"ykGm5XhAO3TcwJC7r4gs",treeCheckboxNodeChildren:"kFKc_IEorQbMeNKZztC9",treeCheckboxCaret:"AtDEUXEgsNyd9awsIPgE",treeCheckboxCaretEmpty:"pYxn6nnwHPQFE9JSQiTO",treeCheckboxNodeLabel:"ojbCeDoAsNt5jhq5dCFC",treeCheckboxNodeCheckboxInclude:"AYLtW5ltLRqzw3wEIjQA",treeCheckboxNodeCheckbox:"XoZSZf_0kkv0Su8BnSUO",treeCheckboxSearchBarContainer:"eubpWHQZqVjHwvfcZtUg",treeCheckboxSearchResultsContainer:"c759lhSAaT3OBU6HSE7q",treeCheckboxNodeChild:"m5YkTHS__Zj_UE0GsBGt",treeCheckboxNode:"lslMhbbaLLjGy9N2I7n7"};const i=l},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(a)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(l[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&l[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},l=[],i=0;i<e.length;i++){var s=e[i],c=a.base?s[0]+a.base:s[0],d=o[c]||0,h="".concat(c," ").concat(d);o[c]=d+1;var u=n(h),b={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==u)t[u].references++,t[u].updater(b);else{var f=r(b,a);a.byIndex=i,t.splice(i,0,{identifier:h,updater:f,references:1})}l.push(h)}return l}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var i=n(o[l]);t[i].references--}for(var s=a(e,r),c=0;c<o.length;c++){var d=n(o[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=s}}},569:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,exports:{}};return e[a](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{HTMLWidgets;var e=n(379),t=n.n(e),a=n(795),r=n.n(a),o=n(569),l=n.n(o),i=n(565),s=n.n(i),c=n(216),d=n.n(c),h=n(589),u=n.n(h),b=n(187),f={};f.styleTagTransform=u(),f.setAttributes=s(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=d(),t()(b.Z,f);const p=b.Z&&b.Z.locals?b.Z.locals:void 0;const g=function(e,t){(function(e,t){let n=e.find(".tree-checkbox-search-bar").val().length;return!(t.minSearchChars>n||0===n)||(e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),e.find(`.${p.treeCheckboxNodeContainer}`).show(),!1)})(e,t)&&(t.advancedSearch?function(e,t){throw new Error("Advanced search is not implemented yet")}():function(e,t){let n=e.find(".tree-checkbox-search-bar").val().toLowerCase();if(0===n.length)return e.find(`.${p.treeCheckboxNodeContainer}`).show(),void e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide();let a=e.data("treeData");console.log(`Searching in ${Object.keys(a).length} items`),console.time("Search");let r=Object.values(a).filter((e=>e.label.toLowerCase().includes(n)));console.timeEnd("Search"),r=r.slice(0,t.maxSearchResults),console.time("Render"),function(e,t,n){e.find(`.${p.treeCheckboxNodeContainer}`).hide(),e.find(`.${p.treeCheckboxSearchResultsContainer}`).show();const a=e.data("options"),r=e.data("treeData");let o=$("<div> ",{class:"list-group"});if(t.forEach((function(t){let l=$("<a>",{class:"list-group-item list-group-item-action",value:t.value}),i=r[t.parent]?r[t.parent].label:"null",s=function(e,t){let n=e.toLowerCase(),a=t.toLowerCase();return n.replace(new RegExp(a,"g"),"<span class='text-fw fw-bold text-decoration-underline'>"+t+"</span>")}(t.label,n);if(a.advancedSearch)s=s+" <small>("+t.column+")</small>",l.html(s);else{let e=$("<span>"),n=$("<span>").html(s);if(e.append(n),l.html(e),null!==t.parent){let t=$("<span>",{class:"badge bg-secondary rounded-pill float-right"}).html(i);e.append(t)}}o.append(l),l.on("click",(function(){!function(e,t,n){(function(e,t,n){let a=e[t].parent;for(;null!==a;)n.unshift(a),a=e[a].parent;return n})(e,t.value,[]).forEach((function(e){n.find("#checkbox-node-"+e).find(`.${p.treeCheckboxCaret}.${p.collapsed}`).first().click()})),n.find(`.${p.treeCheckboxNodeLabel}`).removeClass(p.highlight);let a=n.find("#checkbox-node-"+t.value);a.find(`.${p.treeCheckboxNodeLabel}`).first().addClass(p.highlight),n.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),n.find(`.${p.treeCheckboxNodeContainer}`).show(),n.find(".tree-checkbox-search-bar").val(""),n.find(`.${p.treeCheckboxNodeContainer}`).animate({scrollTop:a.offset().top-n.find(`.${p.treeCheckboxNodeContainer}`).offset().top+n.find(`.${p.treeCheckboxNodeContainer}`).scrollTop()},500),n.find(`.${p.treeCheckboxNodeContainer}`).animate({scrollLeft:a.offset().left-n.find(`.${p.treeCheckboxNodeContainer}`).offset().left+n.find(`.${p.treeCheckboxNodeContainer}`).scrollLeft()},500)}(r,t,e)}))})),0===t.length&&n.length>0){let e=$("<a>",{class:"list-group-item list-group-item-action"});e.html("No results found for <strong>"+n+"</strong>"),o.append(e)}e.find(`.${p.treeCheckboxSearchResultsContainer}`).html(o)}(e,r,n),console.timeEnd("Render")}(e,t))},C={};C.createUniqueID=(()=>{let e=0;return()=>e++})(),C.createTreeCheckboxContainer=function(e){let t=$("<div>",{class:`${p.treeCheckboxContainer} border border-fg rounded d-flex flex-column`,id:`tree-checkbox-container-${C.createUniqueID()}`});return null!==e.maxWidth&&t.css("max-width",e.maxWidth),null!==e.height&&t.css("height",e.height),t.css("list-style-type","none"),t},C.createElementNode=function(e,t,n,a,r=null){let o=$("<div>",{class:`${p.treeCheckboxNode} ${p.collapsed}`,id:"checkbox-node-"+t}),l=$("<span>",{class:"tree-checkbox-node-span"}),i=$("<ul>",{class:p.treeCheckboxNodeChildren}).hide(),s=C.createCaret(a);l.append(s);const c=e.data("options");if(s.on("click",(function(){k.caretClickLogic.call(this,o,e,t,c,r)})),!c.hideCheckboxes){let n=C.attachCheckbox(e,o,t,c,r);l.append(n)}let d=$("<span>",{class:p.treeCheckboxNodeLabel});return d.html(n),c.clickableLabels&&(d.addClass(p.clickable),d.on("click",(function(){k.labelClickLogic(e,t,c)}))),l.append(d),o.append(l),a&&o.append(i),o},C.attachCheckbox=function(e,t,n,a,r=null){let o=$("<span>",{class:p.treeCheckboxNodeCheckbox,value:n});return $(document).ready((function(){k.setCheckboxLogic(e,o,n,a,r)})),o},C.createCaret=function(e,t=!1){if(e){let e=$("<span>",{class:p.treeCheckboxCaret});return t?(e.addClass(p.expanded),e.html('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/></svg>')):(e.addClass(p.collapsed),e.html('<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"/></svg>')),e}return $("<span>",{class:p.treeCheckboxCaretEmpty})},C.generateDeSelectAllButton=function(e,t,n){let a="tree-checkbox-deselect-all-button-"+C.createUniqueID(),r=$("<button>",{class:"btn btn-outline-fg dropdown-toggle border-bottom",type:"button",id:a,"data-bs-toggle":"dropdown","aria-expanded":"false"});r.html("(De)select"),r.css("border-radius","0"),t.append(r);let o=$("<ul>",{class:"dropdown-menu","aria-labelledby":a});o.css("border-radius","0"),t.append(o);let l=$("<li>"),i=$("<button>",{class:"dropdown-item",type:"button",id:"tree-checkbox-deselect-all-button"});i.html("Deselect All"),l.append(i),o.append(l);for(let t in n.states)if("none"!==t&&"indeterminate"!==t){const a=t.toLowerCase(),r=$("<button>",{class:"dropdown-item",type:"button",id:"tree-checkbox-select-all-button"});r.html(`Select All (${a})`),o.append($("<li>").append(r)),r.on("click",(function(){k.deSelectAll(e,n,t),k.runUpdateCallback(e,"SelectAllChange",null,a)}))}i.on("click",(function(){k.deSelectAll(e,n,"none"),k.runUpdateCallback(e,"deSelectAll",null,"none")}))},C.generateCollapseButton=function(e,t){let n="tree-checkbox-collapse-expand-button-"+C.createUniqueID(),a=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:n});a.html("Collapse All"),a.css("border-radius","0"),t.append(a),a.on("click",(function(){k.collapseAll(e)}))},C.generateSearchBar=function(e,t,n,a){let r=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:"tree-checkbox-search-button"});r.html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">\n  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n</svg>Search'),r.css("border-radius","0"),e.append(r);let o=$("<div>",{class:`input-group ${p.treeCheckboxSearchBarContainer}`}).hide();t.append(o);let l=$("<input>",{class:"form-control tree-checkbox-search-bar",type:"text"});l.attr("placeholder","Search"),l.css("border-radius","0"),o.append(l),l.on("keyup",(function(e){g(a,n)})),l.on("keydown",(function(e){"Escape"===e.key&&k.searchBarCloseLogic(a,n)}));let i=$("<button>",{class:"btn btn-outline-fg border-bottom",type:"button",id:"tree-checkbox-cancel-button","aria-label":"Close-search-bar"});i.html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>\n</svg>'),i.css("border-radius","0"),o.append(i),i.on("click",(function(){k.searchBarCloseLogic(a,n)})),r.on("click",(function(){k.searchBarClickLogic(a,n)}))},C.createTreeButtonContainer=function(e,t){let n=$("<div>",{class:`${p.treeCheckboxButtonContainer} container-fluid w-100`}),a=$("<div>",{class:"btn-group w-100"});if(n.append(a),t.showSelectAll&&!1===t.hideCheckboxes&&C.generateDeSelectAllButton(e,a,t),t.showCollapseAll&&C.generateCollapseButton(e,a),t.showSearchBar){C.generateSearchBar(a,n,t,e);let r=$("<div>",{class:`${p.treeCheckboxSearchResultsContainer} overflow-auto`}).hide();r.css("height",t.height),r.css("max-height",t.height),n.append(r)}return n};const w=C,x={createTree:function(e,t,n){let a=w.createTreeCheckboxContainer(n);e.append(a);let r=w.createTreeButtonContainer(a,n);a.append(r),0===r.find(".btn-group").children().length&&r.hide();let o=this.flattenJSON(t);a.data("treeData",o),a.data("options",n);let l=$("<div>",{class:`${p.treeCheckboxNodeContainer} overflow-auto w-100 flex-grow-1`});a.append(l),this.addElementNodes(a,l,n);let i=JSON.stringify(o).length;console.log(`The data object is ${i} bytes which is ${i/1e3/1e3} MB`),console.log(`There are ${Object.keys(o).length} nodes`)},flattenJSON:function(e){let t;return t={},function e(n,a=null,r=!1){n&&Array.isArray(n)&&n.forEach((n=>{if(t[n.value])throw new Error(`Duplicate value/ID '${n.value}'`);n.parent&&(a=n.parent);const o={...n,parent:a,isRendered:r};t[n.value]=o,n.children&&(o.children=n.children.map((e=>e.value))),e(n.children,n.value)}))}(e),t},addNode:function(e,t,n,a,r){if(!Object.keys(e).includes(t))throw new Error("Invalid parentID");if("string"!=typeof n)throw new Error("value must be a string");if("string"!=typeof a)throw new Error("label must be a string");if("object"!=typeof r&&null!==r)throw new Error("children must be an array or null")},addElementNodes:function(e,t){let n=e.data("treeData");e.data("options"),Array.from(Object.values(n)).filter((e=>null===e.parent&&!e.isRendered)).forEach((function(a){let r=w.createElementNode(e,a.value,a.label,a.children.length>0);t.append(r),n[a.value].isRendered=!0}))},setCheckBoxState:function(e,t){return e.html($("<span>",{class:t.textColour,html:t.symbol})),e.css("cursor","pointer"),t},setChildState:function(e,t,n){e.data("treeData")[t].children.map((t=>e.data("treeData")[t])).forEach((function(t){let a=e.find("#checkbox-node-"+t.value);a.data("state",n.data("state")),x.setCheckBoxState(a.find(`.${p.treeCheckboxNodeCheckbox}`),n.data("state"))}))},handleIntermediate:function(e,t,n,a){let r=e.data("treeData")[t].parent;if(null!==r){let t=e.data("treeData")[r].children.map((t=>e.data("treeData")[t]));if(!t.every((e=>e.isRendered)))throw new Error("Not all siblings have been rendered");let o=t.map((t=>e.find("#checkbox-node-"+t.value).data("state")));if(o.every((e=>e===o[0]))){let t=e.find("#checkbox-node-"+r);t.data("state",a.data("state")),x.setCheckBoxState(t.find(`.${p.treeCheckboxNodeCheckbox}`).first(),a.data("state"))}else{let t=e.find("#checkbox-node-"+r);t.data("state",n.states.indeterminate),x.setCheckBoxState(t.find(`.${p.treeCheckboxNodeCheckbox}`).first(),n.states.indeterminate)}}}};x.setCheckboxLogic=function(e,t,n,a,r=null){let o=e.find("#checkbox-node-"+n);null===r?(o.data("state",a.states[a.defaultState]),x.setCheckBoxState(t,a.states[a.defaultState])):(o.data("state",a.states[r]),x.setCheckBoxState(t,a.states[r])),t.on("click",(function(){(function(e,t,n){let a=function(e,t){let n=Object.values(t).filter((e=>!e.skipCursor));e.skipCursor&&(n=n.filter((e=>!e.skipCursor)));let a=n.indexOf(e);return n[(a+1)%n.length]}(e.data("state"),n);e.data("state",a),x.setCheckBoxState(t,a)})(o,$(this),a.states),x.setChildState(e,n,o),x.handleIntermediate(e,n,a,o);let t=Object.keys(a.states).find((e=>a.states[e]===o.data("state")));x.runUpdateCallback(e,"CheckboxChange",n,t)}))},x.getNodeChildren=function(e,t){if(!data[t].isRendered)throw new Error("Node has not been rendered yet");let n=data[t].children,a=[];return n.forEach((function(t){if(!data[t].isRendered)throw new Error("Node has not been rendered yet");a.push(e.find("#checkbox-node-"+t))})),a},x.findNode=function(e,t,n=!0,a=!0){let r=e.data("treeData");if(!Object.keys(r).includes(t)&&n)throw new Error("Value does not exist");if(!r[t].isRendered&&a)throw new Error("Node has not been rendered yet");return e.find("#checkbox-node-"+t)},x.attachChildElement=function(e,t,n){let a=e.find("#checkbox-node-"+t);if(0===a.length)throw new Error("Parent node not found");let r=a.children(`.${p.treeCheckboxNodeChildren}`),o=$("<li>",{class:p.treeCheckboxNodeChild,style:"list-style-type: none;"});o.append(n),r.append(o)},x.updateChildrenElements=function(e,t,n,a){let r=e.data("treeData")[t].children.map((t=>e.data("treeData")[t]));const o=e.data("options");r.filter((e=>!e.isRendered)).forEach((function(r){let l=n.data("state"),i=Object.keys(o.states).find((e=>o.states[e]===l));"indeterminate"===i&&(i="none");let s=w.createElementNode(e,r.value,r.label,r.children.length>0,i);x.attachChildElement(e,t,s,a),e.data("treeData")[r.value].isRendered=!0}))},x.caretClickLogic=function(e,t,n,a,r){let o=$(this);o.toggleClass(p.collapsed),o.toggleClass(p.expanded),e.toggleClass(p.collapsed),e.toggleClass(p.expanded),e.hasClass(p.expanded)?(x.updateChildrenElements(t,n,e,r),o.parent().siblings(`.${p.treeCheckboxNodeChildren}`).slideDown()):e.hasClass(p.collapsed)&&o.parent().siblings(`.${p.treeCheckboxNodeChildren}`).slideUp()},x.searchBarClickLogic=function(e,t){e.find(".btn-group").hide();let n=e.find(`.${p.treeCheckboxSearchBarContainer}`);n.show(),n.find(".tree-checkbox-search-bar").focus()},x.deSelectAll=function(e,t,n){e.find(`.${p.treeCheckboxNode}`).each((function(){let e=$(this);e.data("state",t.states[n]),x.setCheckBoxState(e.find(`.${p.treeCheckboxNodeCheckbox}`),t.states[n])}))},x.runUpdateCallback=function(e,t,n=null,a=null){const r=e.data("options");if(null!==r.updateCallback){let e=r.updateCallbackArgs;null===e&&(e=[]),r.updateCallback({value:n,state:a,event:t},...e)}},x.collapseAll=function(e){e.find(`.${p.treeCheckboxNode}.${p.expanded}`).each((function(){let e=$(this),t=e.find(`.${p.treeCheckboxCaret}`).first();t.toggleClass(p.collapsed),t.toggleClass(p.expanded),e.toggleClass(p.collapsed),e.toggleClass(p.expanded),t.parent().siblings(`.${p.treeCheckboxNodeChildren}`).hide()}))},x.searchBarCloseLogic=function(e,t){e.find(`.${p.treeCheckboxSearchBarContainer}`).hide(),e.find(`.${p.treeCheckboxSearchResultsContainer}`).hide(),e.find(`.${p.treeCheckboxNodeContainer}`).show(),e.find(".btn-group").show()},x.labelClickLogic=function(e,t,n){const a=n.clickableLabelsCallback;null===n.clickableLabelsCallbackArgs?a(t):a(t,...n.clickableLabelsCallbackArgs)},x.validateOptions=function(e){if(!e.startCollapsed)throw new Error("startCollapsed must be a boolean");if("string"!=typeof e.height)throw new Error("height must be a string");if(isNaN(e.height.slice(-1))||"0"!==e.height&&(e.height+="px",console.warn("height must be a valid CSS value. Appending px")),isNaN(e.height.slice(-1))||"0"!==e.height&&(e.height+="px",console.warn("height must be a valid CSS value. Appending px")),"boolean"!=typeof e.showSelectAll)throw new Error("showSelectAll must be a boolean");if("boolean"!=typeof e.showCollapseAll)throw new Error("showCollapseAll must be a boolean");if("boolean"!=typeof e.showSearchBar)throw new Error("showSearchBar must be a boolean");if("boolean"!=typeof e.advancedSearch)throw new Error("advancedSearch must be a boolean");if("boolean"!=typeof e.clickableLabels)throw new Error("clickableLabels must be a boolean");if(!0===e.clickableLabels&&null===e.clickableLabelsCallback)throw new Error("clickableLabelsCallback must be a function, when clickableLabels is true");if(null!==e.clickableLabelsCallback&&"function"!=typeof e.clickableLabelsCallback)throw new Error("clickableLabelsCallback must be a function");if(null!==e.clickableLabelsCallbackArgs&&!Array.isArray(e.clickableLabelsCallbackArgs))throw new Error("clickableLabelsCallbackArgs must be an array or null")};const k=x;let v={defaultStates:{},options:{},createState:function(e,t,n,a=!1){return{textColour:"text-secondary",spanClasses:"bg-secondary text-white",symbol:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>',textColour:e,spanClasses:t,symbol:n,skipCursor:a}}};v.defaultStates={checkbox:{none:v.createState("text-dark","bg-dark text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'),include:v.createState("text-success","bg-success text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'),indeterminate:v.createState("text-warning","bg-warning text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>\n</svg>',!0)},include:{none:v.createState("text-dark","bg-dark text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'),include:v.createState("text-success","bg-success text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'),indeterminate:v.createState("text-warning","bg-warning text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>\n</svg>',!0),exclude:v.createState("text-danger","bg-danger text-white",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>')}},v.options={startCollapsed:!0,width:null,height:"450px",maxWidth:"100%",maxHeight:"100%",showSelectAll:!0,showCollapseAll:!0,showSearchBar:!0,advancedSearch:!1,clickableLabels:!1,clickableLabelsCallback:null,clickableLabelsCallbackArgs:null,returnNonLeafNodes:!1,minSearchChars:1,maxSearchResults:100,hideCheckboxes:!1,updateCallback:null,updateCallbackArgs:null,states:v.defaultStates.include,defaultState:"none"},v.createTreeCheckbox=function(e,t,n=this.options){if("object"!=typeof n)throw new Error("options must be an object");if(n={...this.options,...n,containerID:e},k.validateOptions(n),"string"!=typeof e)throw new Error("containerID must be a string");e.startsWith("#")||(e="#"+e);let a=$(e);if(0===a.length)throw new Error("Container does not exist");if("object"!=typeof t)throw new Error("data must be an object");if("string"==typeof n.states){let e=Object.keys(v.defaultStates);if(!e.includes(n.states))throw new Error(`The state ${n.states} is not available. The available states are: ${e}`);n.states=v.defaultStates[n.states]}if(!Object.keys(n.states).includes("indeterminate")||!Object.keys(n.states).includes("none"))throw new Error("options.states must have an indeterminate state");k.createTree(a,t,n),a.data("getValues",(function(){return v.values(e)}))},v.addNodes=function(e,t){if("string"!=typeof e)throw new Error("containerID must be a string");let n=$(e);if(0===n.length)throw new Error("Container does not exist, first create the tree with TreeCheckbox.createTreeCheckbox()");if("object"!=typeof t)throw new Error("data must be an object");if(!Array.isArray(t))throw new Error("data must be an array");if(0===t.length)throw new Error("data must have at least one element");if(!("label"in t[0]&&"value"in t[0]&&"parent"in t[0]&&"children"in t[0]))throw new Error("data must be in the format: [{'label':str, 'value':int, 'parent':int, 'children':[...]}]");let a=k.flattenJSON(t),r=n.find(`.${p.treeCheckboxContainer}`),o=r.data("treeData");const l=r.data("options");Object.keys(a).forEach((function(e){let t=a[e];if(t.value in o)throw new Error(`The value ${t.value} is already in the tree`)})),o={...o,...a},r.data("treeData",o),Object.keys(a).forEach((function(e){let t=a[e];if(null!==t.parent){let e=r.data("treeData")[t.parent];if(e.children.push(t.value),e.isRendered){let t=e.value,n=r.find("#checkbox-node-"+t),a=n.data("state"),o=Object.keys(l.states).find((e=>l.states[e]===a));"indeterminate"===o&&(o="none"),$(document).ready((function(){k.updateChildrenElements(r,t,n,o)}))}}}))},v.values=function(e){if("string"!=typeof e)throw new Error("containerID must be a string");const t=$(e);if(0===t.length)throw new Error("Container does not exist, first create the tree with TreeCheckbox.createTreeCheckbox()");const n=t.find(`.${p.treeCheckboxContainer}`),a=n.data("treeData"),r=n.data("options");if(r.hideCheckboxes)return[];const o=[];return Object.keys(a).forEach((function(e){const t=a[e];if(t.isRendered){const e=n.find("#checkbox-node-"+t.value).data("state"),l=Object.keys(r.states).find((t=>r.states[t]===e));(function(e,t){return"indeterminate"!==t&&"none"!==t&&(!!r.returnNonLeafNodes||0===e.children.length||e.children.every((e=>!a[e].isRendered)))})(t,l)&&o.push({value:t.value,state:l})}})),o},v.editOptions=function(e,t){let n={...$(e).find(`.${p.treeCheckboxContainer}`).data("options"),...t};k.validateOptions(n),$(e).find(`.${p.treeCheckboxContainer}`).data("options",n)},HTMLWidgets.widget({name:"shiniertreecheckbox",type:"output",factory:function(e,t,n){return{renderValue:function(t){v.createTreeCheckbox(t.elementId,JSON.parse(t.data),t.options),e.style.width="100%",e.style.height="100%"},resize:function(e,t){}}}})})()})();